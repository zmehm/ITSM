{% extends 'base.html' %}
{% load static %}
{# REMOVED: {% load custom_filters %} #}

{% block title %}{{ queue_name }}{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    {# Display the queue name using the formatted count string sent from the view #}
    <h2 class="mb-4 fw-bold text-{{ queue_color }} border-bottom pb-2">
        <i class="fas {{ queue_icon }} me-2"></i> {{ queue_name }} ({{ ticket_count_formatted }} Tickets)
    </h2>
    
    {% if tickets %}
        <p class="text-muted">Below is the complete list of tickets in this queue, sorted by priority.</p>
        
        <div class="card shadow-lg mb-5">
            <div class="card-body p-0">
                {# This snippet includes your fully formatted ticket table #}
                {% include 'accounts/includes/ticket_table.html' with tickets=tickets is_support_view=is_support_view is_feedback_queue=is_feedback_queue %}
            </div>
        </div>
    {% else %}
        <div class="alert alert-success shadow-sm mb-5">
            <i class="fas fa-check-circle me-2"></i> This queue is currently empty. Good job!
        </div>
    {% endif %}

    <a href="{% url 'support_dashboard' %}" class="btn btn-outline-secondary mt-3">
        <i class="fas fa-arrow-left me-2"></i> Back to Action Hub
    </a>

</div>
{% endblock %}